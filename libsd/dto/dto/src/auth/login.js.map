{"version":3,"sources":["../../../../../../libs/dto/src/auth/login.ts"],"sourcesContent":["import { createZodDto } from \"nestjs-zod/dto\";\nimport { z } from \"nestjs-zod/z\";\n\nimport { usernameSchema } from \"../user\";\n\nexport const loginSchema = z\n  .object({\n    identifier: z.string(),\n    password: z.password().min(6),\n  })\n  .refine(\n    (value) => {\n      if (value.identifier.includes(\"@\")) {\n        return z.string().email().parse(value.identifier);\n      } else {\n        return usernameSchema.parse(value.identifier);\n      }\n    },\n    { message: \"InvalidCredentials\" },\n  );\n\nexport class LoginDto extends createZodDto(loginSchema) {}\n"],"names":["LoginDto","loginSchema","z","object","identifier","string","password","min","refine","value","includes","email","parse","usernameSchema","message","createZodDto"],"mappings":";;;;;;;;;;;IAqBaA,QAAQ;eAARA;;IAhBAC,WAAW;eAAXA;;;qBALgB;mBACX;sBAEa;AAExB,MAAMA,cAAcC,IAAC,CACzBC,MAAM,CAAC;IACNC,YAAYF,IAAC,CAACG,MAAM;IACpBC,UAAUJ,IAAC,CAACI,QAAQ,GAAGC,GAAG,CAAC;AAC7B,GACCC,MAAM,CACL,CAACC;IACC,IAAIA,MAAML,UAAU,CAACM,QAAQ,CAAC,MAAM;QAClC,OAAOR,IAAC,CAACG,MAAM,GAAGM,KAAK,GAAGC,KAAK,CAACH,MAAML,UAAU;IAClD,OAAO;QACL,OAAOS,oBAAc,CAACD,KAAK,CAACH,MAAML,UAAU;IAC9C;AACF,GACA;IAAEU,SAAS;AAAqB;AAG7B,IAAA,AAAMd,WAAN,MAAMA,iBAAiBe,IAAAA,iBAAY,EAACd;AAAc"}